import{R as M,j as s,M as v,a as m}from"./index-CkWhDhop.js";const f=(t,e)=>{e.forEach(c=>{const o=t[0],a=t[1],n=c.gpsLocation[0],j=c.gpsLocation[1],d=r(n-o),l=r(j-a),h=Math.sin(d/2)*Math.sin(d/2)+Math.cos(r(o))*Math.cos(r(n))*Math.sin(l/2)*Math.sin(l/2),x=6371*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)));c.distance=x.toFixed(1)})},r=t=>t*(Math.PI/180),R=M.memo(({busStop:t,onSelect:e})=>s.jsxs("div",{className:"station-item",onClick:e,children:[s.jsx(v,{size:24}),s.jsxs("div",{children:[s.jsx("h3",{children:t.name}),s.jsxs("p",{children:[t.distance," km"]})]})]})),z=({userLocation:t,setActiveStation:e,busStops:i,setCurentUrl:c})=>{m.useEffect(()=>{f(t,i)},[t,i]);const o=m.useMemo(()=>i.filter(a=>a.distance<=10&&a.distance>0).sort((a,n)=>a.distance-n.distance),[i]);return s.jsxs("div",{className:"insideDiv",children:[s.jsx("h2",{children:"Postaje v bliÅ¾ini"}),s.jsx("p",{children:"Prosimo izberite postajo iz seznama ali na zemljevidu."}),o.map((a,n)=>s.jsx(R,{busStop:a,onSelect:()=>{e(a),window.location.href="/#/arrivals",localStorage.setItem("activeStation",JSON.stringify(a)),c("/arrivals")}},n))]})},N=M.memo(z);export{N as default};
