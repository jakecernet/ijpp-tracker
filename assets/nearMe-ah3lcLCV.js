import{R as j,a as m,j as e,M as v}from"./index-CgBvasSH.js";const f=(s,n)=>{n.forEach(c=>{const o=s[0],r=s[1],l=c.gpsLocation[0],h=c.gpsLocation[1],t=d(l-o),a=d(h-r),x=Math.sin(t/2)*Math.sin(t/2)+Math.cos(d(o))*Math.cos(d(l))*Math.sin(a/2)*Math.sin(a/2),M=6371*(2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x)));c.distance=M.toFixed(1)})},d=s=>s*(Math.PI/180),u=j.memo(({busStop:s,onSelect:n})=>e.jsxs("div",{className:"station-item",onClick:n,children:[e.jsx(v,{size:24}),e.jsxs("div",{children:[e.jsx("h3",{children:s.name}),e.jsxs("p",{children:[s.distance," km"]})]})]})),p=({userLocation:s,setActiveStation:n,busStops:i,setCurentUrl:c})=>{m.useEffect(()=>{f(s,i)},[s,i]);const o=m.useMemo(()=>i.filter(t=>t.distance<=10&&t.distance>0).sort((t,a)=>t.distance-a.distance),[i]),[r,l]=j.useState(""),h=m.useMemo(()=>o.filter(t=>t.name.toLowerCase().includes(r.toLowerCase())),[o,r]);return e.jsxs("div",{className:"insideDiv",children:[e.jsx("h2",{children:"Postaje v bliÅ¾ini"}),e.jsx("p",{children:"Prosimo izberite postajo iz seznama ali na zemljevidu."}),e.jsx("input",{className:"search-input",type:"text",placeholder:"Vnesite ime postaje",value:r,onChange:t=>l(t.target.value)}),e.jsx("div",{className:"station-list",children:h.map((t,a)=>e.jsx(u,{busStop:t,onSelect:()=>{n(t),window.location.href="/#/arrivals",localStorage.setItem("activeStation",JSON.stringify(t)),c("/arrivals")}},a))})]})},R=j.memo(p);export{R as default};
